name: Deploy EC2

on:
  push:
    branches: [ experimental ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      
name: Checkout codigo
      uses: actions/checkout@v4
      
name: Debug secrets
      run: echo "O valor do host Ã©: ${{ secrets.EC2_HOST }}"

      
name: Conectar via SSH e fazer deploy
      uses: appleboy/ssh-action@v1.1.0
      with:
        host: ${{ secrets.EC2_HOST }}
        username: ${{ secrets.EC2_USER }}
        key: ${{ secrets.EC2_SSH_KEY }}
        script: |
          cd /home/ec2-user/BotComunidade
          git pull
          docker compose up --build -d
